"use strict";angular.module("gotChamp").controller("NavbarCtrl",["$scope","$rootScope","$injector","$location","localStorageService","$http","authService","ProfileFactory","toastr","$window",function(n,t,i,r,u,f,e,o,s,h){function c(){var t=h.innerWidth;t<=800?n.showNavbar=!1:t>800&&(n.showNavbar=!0)}n.navbarInit=function(){n.date=new Date;n.latestCombination="0-0-0-0-0-0-0";l();n.authentication.isAuth&&n.loadLatestCombination();c()};h.onresize=function(){c()};var l=function(){e.fillAuthData();n.authentication=e.authentication};n.date=new Date;n.latestCombination="0-0-0-0-0-0-0";n.toggle=function(){$(".user-setting").toggleClass("open");var t=u.get("authorizationData");t&&(n.userName=t.username,t.imgPath!=""&&($("#navbarPhoto").css({width:"60px",height:"60px"}),$("#navbarPhoto").attr("src",t.imgPath)))};n.signOut=function(){u.remove("authorizationData");u.remove("combinationNumberData");u.remove("hasPlayed");l();$(".user-setting").removeClass("open");o.playerLogOut().success(function(){h.open("#/login","_self")})};n.loadLatestCombination=function(){try{var t=u.get("authorizationData");o.getLatestCombination().success(function(t){n.latestCombination=typeof t.Combination!="undefined"?t.Combination:"本日はまだプレイされておりません。"}).error(function(){n.latestCombination="エントリー番号を受理することが出来ませんでした。"})}catch(i){}}}]).factory("ProfileFactory",["$http",function(n){return{getLatestCombination:function(){return n.get("/api/combination/getPlayerCombination")},playerLogOut:function(){return n.post("/api/account/logout")}}}]);
//# sourceMappingURL=navbar.controller.min.js.map
